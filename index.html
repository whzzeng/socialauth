<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>ClassConnect</title>
  <!-- Bootstrap core CSS -->
   <link href="https://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
   <!-- Custom styles for this template -->
   <link href="https://getbootstrap.com/docs/4.0/examples/cover/cover.css" rel="stylesheet">
   <style>
    #welcome, #prompt {
      display: none;
    }
   </style>

</head>

<body class="text-center" style="background-color:white">
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '393143551111732',
        cookie     : true,
        xfbml      : true,
        version    : 'v2.11'
      });
      FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
      });
    };
    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "https://connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));

     function statusChangeCallback(response){
       if(response.status === 'connected'){
         console.log('Logged in and authenticated');
         setElements(true);
       } else {
         console.log('Not authenticated');
         setElements(false);
       }
     }

     function checkLoginState() {
       FB.getLoginStatus(function(response) {
        statusChangeCallback(response);
       });
     }

     function setElements(isLoggedIn){
       if(isLoggedIn){
         document.getElementById('prompt').style.display = 'block';
         document.getElementById('login-button').style.display = 'none';
         document.getElementById('logout').style.display = 'block';
         document.getElementById('welcome').style.display = 'none';
       } else {
         document.getElementById('prompt').style.display = 'none';
         document.getElementById('login-button').style.display = 'block';
         document.getElementById('welcome').style.display = 'block';
         document.getElementById('logout').style.display = 'none';
       }
     }

     function logout() {
       FB.logout(function(response){
         setElements(false);
       });
     }

  </script>

  <div class="cover-container d-flex h-100 p-3 mx-auto flex-column" style="background-color: #3b5998">

      <header class="masthead mb-auto">
        <div class="inner">
          <h3 class="masthead-brand">ClassConnect</h3>
          <nav class="nav nav-masthead justify-content-center">
            <li><a id="logout" href="#" onclick="logout()">Logout</a><li>
            <fb:login-button id="login-button"
              scope="public_profile,email,user_friends"
              onlogin="checkLoginState();">
            </fb:login-button>
          </nav>
        </div>
      </header>


      <div class="inner cover" id="prompt" class="block">
    		<form style="margin-bottom: 120%" action="{{ url_for('index') }}" method=post class=index>
    			<input class="btn" style="height:40px" type=text size=50 name=class_search placeholder="What class are you looking for? (ex. CSCI 0170)">
    			<button class="btn"style="height:40px" type="submit" id="submit">Connect</button>
    		</form>
        <a href="#">Add your classes!</a>
      </div>

      <div id="welcome" style="width:556.56px; margin-bottom:50%">
        <h1>Welcome to</h1>
        <img src="logo.png">
      </div>

  </div>

</body>
</html>
